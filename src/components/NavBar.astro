---
import { Image } from "astro:assets";
import { navLinks } from "../data/navigation";
import logoImage from "../../public/logo.svg";

// NavBar component props
export interface Props {
  title?: string;
}

const { title = "Juniper" } = Astro.props;
---

<nav>
  <div>
    <a href="#hero" class="flex items-center gap-2">
      <Image src={logoImage} alt="Juniper" width={32} height={32} />
      <p>Juniper</p>
    </a>
    <ul>
      {
        navLinks.map((item) => (
          <li>
            <a href={`#${item.id}`}>{item.title}</a>
          </li>
        ))
      }
    </ul>
  </div>
</nav>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    const navTween = gsap.timeline({
      scrollTrigger: {
        trigger: "nav",
        start: "bottom top",
      },
    });

    navTween.fromTo(
      "nav",
      {
        backgroundColor: "transparent",
      },
      {
        backgroundColor: "#00000050",
        backdropFilter: "blur(10px)",
        duration: 1,
        ease: "power1.out",
      }
    );

    // Smooth scrolling for navigation links
    const navLinks = document.querySelectorAll('nav a[href^="#"]');
    navLinks.forEach((link) => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        const targetId = link.getAttribute("href");
        if (targetId) {
          const targetElement = document.querySelector(targetId);

          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        }
      });
    });
  });
</script>
